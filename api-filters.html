<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Wed Nov 15 2023 11:07:19 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="6553dae82b1370c794246ed1" data-wf-site="6553dae82b1370c794246e84">
<head>
  <meta charset="utf-8">
  <title>Display data from external API in Webflow</title>
  <meta content="Learn how to display data from an external API in Webflow" name="description">
  <meta content="Display data from external API in Webflow" property="og:title">
  <meta content="https://uploads-ssl.webflow.com/5d65c443f0c41562053b8cd3/5faad417e6b17c0f58351b03_xano_og.png" property="og:image">
  <meta content="Display data from external API in Webflow" property="twitter:title">
  <meta content="https://uploads-ssl.webflow.com/5d65c443f0c41562053b8cd3/5faad417e6b17c0f58351b03_xano_og.png" property="twitter:image">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/andrews-sublime-site-8e279a.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>
<body>
  <div data-collapse="medium" data-animation="default" data-duration="400" bind="18638a64-158e-82a5-ef35-2151b27a4e25" data-easing="ease" data-easing2="ease" role="banner" class="navigation w-nav">
    <div class="navigation-wrap">
      <a href="https://www.xano.com" target="_blank" class="logo-link w-nav-brand"><img src="images/xano-logo-blue-blacktagline.svg" width="200" alt="" class="logo-image"></a>
      <div class="menu">
        <nav role="navigation" class="navigation-items w-nav-menu">
          <a href="http://www.xano.com/?utm_medium=referral&amp;utm_source=webflow&amp;utm_campaign=webflow-api" target="_blank" class="navigation-item w-nav-link">Learn About Xano (no code backend)</a>
        </nav>
        <nav role="navigation" class="navigation-items w-nav-menu">
          <a href="index.html" class="navigation-item w-nav-link">simple API example</a>
        </nav>
        <nav role="navigation" class="navigation-items w-nav-menu">
          <a href="api-filters.html" aria-current="page" class="navigation-item w-nav-link w--current">API example with filterS</a>
        </nav>
        <div class="menu-button w-nav-button"><img src="images/menu-icon_1menu-icon.png" width="22" alt="" class="menu-icon"></div>
      </div>
      <a href="https://go.xano.co/3v55ih2" target="_blank" class="button cc-contact-us w-inline-block">
        <div>Clone this project</div>
      </a>
    </div>
  </div>
  <div class="section cc-store-home-wrap">
    <div class="container">
      <div class="motto-wrap">
        <div class="heading-jumbo-small">Display data from external API in Webflow<br></div>
        <p class="paragraph-light">Below is an example of Webflow displaying data from an API powered by Xano. <a href="https://www.xano.com/blog/how-to-display-data-from-an-external-api-endpoint-in-webflow/?utm_medium=referral&amp;utm_source=webflow&amp;utm_campaign=webflow-api-blog" target="_blank" class="link-2"><span class="highlight">Learn how to do this</span></a><br></p>
      </div>
    </div>
  </div>
  <div class="section api-content">
    <div class="container">
      <ul id="Category-Container" role="list" class="list">
        <li id="category-all" class="sample-category selected">All</li>
      </ul>
      <div class="section-heading-wrap">
        <div class="label">API DATAÂ will load below...<br></div>
      </div>
      <div id="samplestyle" class="sample-card hide"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" alt="">
        <h3>Heading</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.</p>
      </div>
      <div id="Cards-Container" class="w-layout-grid api-data-goes-here"></div>
    </div>
  </div>
  <div bind="96466240-72c6-8e83-d28e-bad451e627e8" class="section">
    <div class="container">
      <div class="footer-wrap">
        <a href="http://www.xano.com/?utm_medium=referral&amp;utm_source=webflow&amp;utm_campaign=webflow-api" target="_blank" class="webflow-link w-inline-block">
          <div class="paragraph-tiny">Powered by <strong>Webflow + Xano</strong></div>
        </a>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6553dae82b1370c794246e84" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script>
// Create a variable for the API endpoint. In this example, we're accessing Xano's API
let xanoUrl = new URL('https://x715-fe9c-6426.n7.xano.io/api:xrK0o8q4/');
// Since we are filtering by multiple categories, we create an empty array (or group) of categories to filter. This 
// will be based back to Xano below. If you were doing a single category, you would only need an integer. Because we 
// Want a group of categories, we want the group. A way to keep track of it.
let categoryArray = [];
// Define a function (set of operations) to get restaurant information.
// This will use the GET request on the URL endpoint
function getRestaurants() {
	// Create a request variable and assign a new XMLHttpRequest object to it.
	// XMLHttpRequest is the standard way you access an API in plain Javascript.
	let request = new XMLHttpRequest();
	// Define a function (set of operations) to get restaurant information.
	// Creates a variable that will take the URL from above and makes sure it displays as a string. 
	// We then add the word 'restaurant" so the API endpoint becomes https://x715-fe9c-6426.n7.xano.io/api:Iw1iInWB/restaurant
	let url = xanoUrl.toString() + 'restaurant';
	// In order for Xano to filter on the categories, we have to package it up in a way for Xano to understand.
	// This goes through the Categories and passes the right url parameters back to Xano.
	if (categoryArray.length) {
		let filterCategoryParams = '?';
		for (let category of categoryArray) {
			filterCategoryParams = filterCategoryParams + 'category_id[]=' + category + '&'
		}
		url = url + filterCategoryParams;
	}
	// Remember the 'request' was defined above as the standard way to access an API in Javascript.
	// GET is the verb we're using to GET data from Xano
    request.open('GET', url, true)
    // When the 'request' or API request loads, do the following...
	request.onload = function () {
		// Store what we get back from the Xano API as a variable called 'data' and converts it to a javascript object
        let data = JSON.parse(this.response)
        // Status 200 = Success. Status 400 = Problem.  This says if it's successful and no problems, then execute 
		if (request.status >= 200 && request.status < 400) {
            // Map a variable called cardContainer to the Webflow element called "Cards-Container"
            const cardContainer = document.getElementById("Cards-Container")
            // Clear the information that currently exists. We do this because every time we select a new category, we want to
			// clear the cards that were there and create new ones that match the selected categories.
			// If this wasn't there, it would append the new call with the existing one still there. (duplicates)
            cardContainer.innerHTML = '';
            // let oldElements = document.getElementsByClassName('restaurant-card')
            // oldElements.forEach(element => {
            //     element.remove()
            // })
            // For each restaurant, create a div called card and style with the "Sample Card" class
            const style = document.getElementById('samplestyle')
            // This is called a For Loop. This goes through each object being passed back from the Xano API and does something.
            // Specifically, it says "For every element in Data (response from API), call each individual item restaurant"
            data.forEach(restaurant => {
                // Copy the card and it's style
                const card = style.cloneNode(true)
                card.classList.add('restaurant-card')
                card.setAttribute('id', '');
                card.style.display = 'block';
                // When a restuarant card is clicked, navigate to the item page by passing the restaurant id
                card.addEventListener('click', function() {
                    document.location.href = "/item?id=" + restaurant.id;
                });
                // For each restaurant, Create an image and use the restaurant image coming from the API
                const img = card.getElementsByTagName('IMG')[0]
                img.src = restaurant.banner.url + '?tpl=big:box';
                // For each restaurant, create an h3 and set the text content to the restaurant's title
                const h3 = card.getElementsByTagName('H3')[0]
                h3.textContent = restaurant.name;
                // For each restaurant, create an paragraph and set the text content to the restaurant's description
                const p = card.getElementsByTagName('P')[0]
                p.textContent = `${restaurant.description.substring(0, 240)}` // Limit to 240 chars
                // Place the card into the div "Cards-Container" 
                cardContainer.appendChild(card);
            })
		}
    }
    // Send Restaurant request to API
	request.send();
}
// You'll notice the getCategories function is VERY similar to the getRestaurants function above.
// We'll run through basically the same procedure and do another API request to get a list of category names.
function getCategories() {
    // Perform an API request to get Categories from the Xano API
    let CategoryRequest = new XMLHttpRequest()
    // Use the GET Verb and instead of using 'restaurant' like we did above, we'll use category.
    // so the API endpoint becomes https://x715-fe9c-6426.n7.xano.io/api:Iw1iInWB/category
    CategoryRequest.open('GET', xanoUrl.toString() + 'category', true);
    // When the 'request' or API request loads, do the following...
	CategoryRequest.onload = function () {
		// Store what we get back from the Xano API as a variable called 'data' and converts it to a javascript object
        let data = JSON.parse(this.response)
        // Status 200 = Success. Status 400 = Problem.  This says if it's successful and no problems, then execute 
		if (CategoryRequest.status >= 200 && CategoryRequest.status < 400) {
            // This loop goes through each object being passed back from the Xano Category API and creates an element called
            // category. 
			data.forEach(category => {
				// Instead of creating a DIV like we did in restaurant, we'll create a list item or 'li'
				// For each category, create a list element and style with the "Sample Category" class
                const item = document.createElement('li')
                item.setAttribute('class', 'sample-category');
                // For each category, Set an item an ID so we can manipulate it.
				item.setAttribute('id', 'category-' + category.id);
				// We clear any previous category that exists so we can generate new ones.
				item.innerText = category.name;
				item.addEventListener("click", function (event) {
					// When you click on any of the categories, you'll get the category item that is clicked as an id called
					// category-(category id number). We want to take JUST the ID of the clicked category. Apply the selected
					// class and remove it from the the All categories button
					let id = parseInt(event.target.id.split('-')[1]);
					if (categoryArray.includes(id)) {
						categoryArray.splice(categoryArray.indexOf(id), 1);
						event.target.classList.remove('selected');
					} else {
						categoryArray.push(id);
						document.getElementById("category-all").classList.remove('selected');
						event.target.classList.add('selected');
					}
					// With all of this set, we get the reaturants again with the categoryArray populated correctly
					getRestaurants();
				});
				// We append the categories to the ID category container
				document.getElementById("Category-Container").appendChild(item);
			});
		}
	}
	// Send Category request to API
	CategoryRequest.send();
}
// One more function. We do specifically use this function to clear the Category Array and 
// Get ALL the restaurants clearing any category that might be selected.
function ResetCategoryFilters() {
	categoryArray = [];
	const categoryFilters = document.getElementsByClassName("sample-category");
	for (let category of categoryFilters) {
		category.classList.remove('selected');
	}
    getRestaurants();
}
// This fires all of the defined functions when the document is "ready" or loaded
(function () {
	const all = document.getElementById("category-all")
	all.addEventListener("click", function (event) {
		ResetCategoryFilters();
		// Adds the selected back on that got reset by ResetCategoryFilters
		document.getElementById("category-all").classList.add('selected');
	});
	getCategories();
	getRestaurants();
})();
</script>
</body>
</html>